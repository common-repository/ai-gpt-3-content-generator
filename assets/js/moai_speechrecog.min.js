jQuery(document).ready((function(){}));var final_transcript="",recognizing=!1,ignore_onend,mic_image=jQuery(".moai-mic-img"),plugin_path=jQuery("#moai-plugin-path").val();if("webkitSpeechRecognition"in window){var queryBox=jQuery("#querybox"),recognition=new webkitSpeechRecognition;recognition.continuous=!0,recognition.interimResults=!0,recognition.onstart=function(){recognizing=!0,mic_image.attr("src",plugin_path+"assets/img/mic-play.gif"),queryBox.prop("disabled",!0)},recognition.onerror=function(event){"no-speech"==event.error&&(ignore_onend=!0),"audio-capture"==event.error&&(ignore_onend=!0),"not-allowed"==event.error&&(ignore_onend=!0),mic_image.attr("src",plugin_path+"assets/img/mic.gif"),queryBox.prop("disabled",!1)},recognition.onend=function(){recognizing=!1,mic_image.attr("src",plugin_path+"assets/img/mic.gif"),queryBox.prop("disabled",!1),ignore_onend||final_transcript&&(queryBox.val(final_transcript),moai_process_query())},recognition.onresult=function(event){for(var interim_transcript="",i=event.resultIndex;i<event.results.length;++i)event.results[i].isFinal?final_transcript+=event.results[i][0].transcript:interim_transcript+=event.results[i][0].transcript;final_transcript=moai_capitalize(final_transcript),!interim_transcript&&final_transcript&&recognition.stop()}}function moai_mic_input_not_supported(){alert("Speech Recognition is not supported in this browser, please type your query.")}var first_char=/\S/;function moai_capitalize(s){return s.replace(first_char,(function(m){return m.toUpperCase()}))}function moai_start_button(){"webkitSpeechRecognition"in window?recognizing?recognition.stop():(final_transcript="",recognition.lang="en-IN",recognition.start(),ignore_onend=!1):moai_mic_input_not_supported()}